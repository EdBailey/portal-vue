{"version":3,"file":"portal-vue.js","sources":["../src/utils.js","../src/components/wormhole.js","../node_modules/babel-helper-vue-jsx-merge-props/index.js","../src/components/portal-target.js","../src/components/portal.js","../src/index.js"],"sourcesContent":["export function extractAttributes (el) {\n  const map = el.hasAttributes() ? el.attributes : []\n  const attrs = {}\n  for (let i = 0; i < map.length; i++) {\n    const attr = map[i]\n    if (attr.value) {\n      attrs[attr.name] = attr.value === '' ? true : attr.value\n    }\n  }\n  return attrs\n}\n\nexport function freeze (item) {\n  if (Array.isArray(item) || typeof item === 'object') {\n    return Object.freeze(item)\n  }\n  return item\n}\n\nexport function combinePassengers (transports) {\n  let passengers = []\n  for (const transport of transports) {\n    passengers = passengers.concat(transport.passengers)\n  }\n  return passengers\n}\n","import Vue from 'vue'\nimport { combinePassengers, freeze } from '../utils'\nconst transports = {}\n\nexport { transports }\n\nexport class Wormhole {\n  constructor (transports) {\n    this.transports = transports\n  }\n\n  open (transport) {\n    const { to, from, passengers } = transport\n    if (!to || !from || !passengers) return\n\n    transport.passengers = freeze(passengers)\n    const keys = Object.keys(this.transports)\n    if (keys.indexOf(to) === -1) {\n      Vue.set(this.transports, to, [])\n    }\n\n    const currentIndex = this.getTransportIndex(transport)\n    // Copying the array here so that the PortalTarget change event will actually contain two distinct arrays\n    const newTransports = this.transports[to].slice(0)\n    if (currentIndex === -1) {\n      newTransports.push(transport)\n    } else {\n      newTransports[currentIndex] = transport\n    }\n    newTransports.sort(function (a, b) {\n      return a.order - b.order\n    })\n\n    this.transports[to] = newTransports\n  }\n\n  close (transport, force = false) {\n    const { to, from } = transport\n    if (!to || !from) return\n    if (!this.transports[to]) {\n      return\n    }\n\n    if (force) {\n      this.transports[to] = []\n    } else {\n      const index = this.getTransportIndex(transport)\n      if (index >= 0) {\n        // Copying the array here so that the PortalTarget change event will actually contain two distinct arrays\n        const newTransports = this.transports[to].slice(0)\n        newTransports.splice(index, 1)\n        this.transports[to] = newTransports\n      }\n    }\n  }\n\n  hasTarget (to) {\n    return this.transports.hasOwnProperty(to)\n  }\n\n  hasContentFor (to) {\n    if (!this.transports[to]) {\n      return false\n    }\n    return this.getContentFor(to).length > 0\n  }\n\n  getSourceFor (to) {\n    return this.transports[to] && this.transports[to][0].from\n  }\n\n  getContentFor (to) {\n    const transports = this.transports[to]\n    if (!transports) {\n      return undefined\n    }\n    return combinePassengers(transports)\n  }\n\n  getTransportIndex ({ to, from }) {\n    for (const i in this.transports[to]) {\n      if (this.transports[to][i].from === from) {\n        return i\n      }\n    }\n    return -1\n  }\n}\nconst wormhole = new Wormhole(transports)\nexport default wormhole\n","var nestRE = /^(attrs|props|on|nativeOn|class|style|hook)$/\n\nmodule.exports = function mergeJSXProps (objs) {\n  return objs.reduce(function (a, b) {\n    var aa, bb, key, nestedKey, temp\n    for (key in b) {\n      aa = a[key]\n      bb = b[key]\n      if (aa && nestRE.test(key)) {\n        // normalize class\n        if (key === 'class') {\n          if (typeof aa === 'string') {\n            temp = aa\n            a[key] = aa = {}\n            aa[temp] = true\n          }\n          if (typeof bb === 'string') {\n            temp = bb\n            b[key] = bb = {}\n            bb[temp] = true\n          }\n        }\n        if (key === 'on' || key === 'nativeOn' || key === 'hook') {\n          // merge functions\n          for (nestedKey in bb) {\n            aa[nestedKey] = mergeFn(aa[nestedKey], bb[nestedKey])\n          }\n        } else if (Array.isArray(aa)) {\n          a[key] = aa.concat(bb)\n        } else if (Array.isArray(bb)) {\n          a[key] = [aa].concat(bb)\n        } else {\n          for (nestedKey in bb) {\n            aa[nestedKey] = bb[nestedKey]\n          }\n        }\n      } else {\n        a[key] = b[key]\n      }\n    }\n    return a\n  }, {})\n}\n\nfunction mergeFn (a, b) {\n  return function () {\n    a && a.apply(this, arguments)\n    b && b.apply(this, arguments)\n  }\n}\n","// import { transports } from './wormhole'\nimport { combinePassengers } from '../utils'\nimport wormhole from './wormhole'\n\nexport default {\n  abstract: true,\n  name: 'portalTarget',\n  props: {\n    attributes: { type: Object },\n    multiple: { type: Boolean, default: false },\n    name: { type: String, required: true },\n    slim: { type: Boolean, default: false },\n    tag: { type: String, default: 'div' },\n    transition: { type: [Boolean, String, Object], default: false },\n    transitionEvents: { type: Object, default: () => ({}) },\n  },\n  data () {\n    return {\n      transports: wormhole.transports,\n      firstRender: true,\n    }\n  },\n  created () {\n    if (!this.transports[this.name]) {\n      this.$set(this.transports, this.name, [])\n    }\n  },\n  mounted () {\n    this.unwatch = this.$watch('ownTransports', this.emitChange)\n\n    this.updateAttributes()\n    this.$nextTick(() => {\n      if (this.transition) { // only when we have a transition, because it causes a re-render\n        this.firstRender = false\n      }\n    })\n  },\n  updated () {\n    this.updateAttributes()\n  },\n  beforeDestroy () {\n    this.unwatch()\n    this.$el.innerHTML = ''\n  },\n\n  methods: {\n    updateAttributes () {\n      if (this.attributes) {\n        const attrs = this.attributes\n        const el = this.$el\n\n        // special treatment for class\n        if (attrs.class) {\n          attrs.class.trim().split(' ').forEach((klass) => {\n            el.classList.add(klass)\n          })\n          delete attrs.class\n        }\n\n        const keys = Object.keys(attrs)\n\n        for (let i = 0; i < keys.length; i++) {\n          el.setAttribute(keys[i], attrs[keys[i]])\n        }\n      }\n    },\n    emitChange (newTransports, oldTransports) {\n      if (this.multiple) {\n        this.$emit('change',\n          [...newTransports],\n          [...oldTransports]\n        )\n      } else {\n        const newTransport = newTransports.length === 0 ? undefined : newTransports[0]\n        const oldTransport = oldTransports.length === 0 ? undefined : oldTransports[0]\n        this.$emit('change',\n          { ...newTransport },\n          { ...oldTransport }\n        )\n      }\n    },\n  },\n  computed: {\n    ownTransports () {\n      const transports = this.transports[this.name] || []\n      if (this.multiple) {\n        return transports\n      }\n      return transports.length === 0 ? [] : [transports[transports.length - 1]]\n    },\n    passengers () {\n      return combinePassengers(this.ownTransports)\n    },\n    children () {\n      return this.passengers.length !== 0 ? this.passengers : (this.$slots.default || [])\n    },\n    noWrapper () {\n      const noWrapper = !this.attributes && this.slim\n      if (noWrapper && this.children.length > 1) {\n        console.warn('[portal-vue]: PortalTarget with `slim` option received more than one child element.')\n      }\n      return noWrapper\n    },\n    withTransition () {\n      return !!this.transition\n    },\n    transitionData () {\n      const t = this.transition\n      const data = {}\n\n      // During first render, we render a dumb transition without any classes, events and a fake name\n      // We have to do this to emulate the normal behaviour of transitions without `appear`\n      // because in Portals, transitions can behave as if appear was defined under certain conditions.\n      if (this.firstRender && (typeof this.transition === 'object' && !this.transition.appear)) {\n        data.props = { name: '__notranstition__portal-vue__' }\n        return data\n      }\n\n      if (typeof t === 'string') {\n        data.props = { name: t }\n      } else if (typeof t === 'object') {\n        data.props = t\n      }\n      if (this.renderSlim) {\n        data.props.tag = this.tag\n      }\n      data.on = this.transitionEvents\n\n      return data\n    },\n  },\n\n  render (h) {\n    const TransitionType = this.noWrapper ? 'transition' : 'transition-group'\n    const Tag = this.tag\n\n    if (this.withTransition) {\n      return (\n        <TransitionType {...this.transitionData} class='vue-portal-target'>\n          {this.children}\n        </TransitionType>\n      )\n    }\n\n    // Solves a bug where Vue would sometimes duplicate elements upon changing multiple or disabled\n    const wrapperKey = this.ownTransports.length\n\n    return this.noWrapper\n      ? this.children[0]\n      : <Tag class='vue-portal-target' key={wrapperKey}>{this.children}</Tag>\n  },\n}\n","\nimport Vue from 'vue'\nimport wormhole from './wormhole'\nimport Target from './portal-target'\nimport { extractAttributes } from '../utils'\n\nconst inBrowser = (typeof window !== 'undefined')\nconst hasParentFrame = (inBrowser && window.parent)\n\nlet pid = 1\n\nexport default {\n  abstract: true,\n  name: 'portal',\n  props: {\n    /* global HTMLElement */\n    disabled: { type: Boolean, default: false },\n    name: { type: String, default: () => String(pid++) },\n    order: { type: Number, default: 0 },\n    slim: { type: Boolean, default: false },\n    tag: { type: [String], default: 'DIV' },\n    targetEl: { type: inBrowser ? (hasParentFrame ? [String, HTMLElement, window.parent.HTMLElement] : [String, HTMLElement]) : String },\n    to: { type: String, default: () => String(Math.round(Math.random() * 10000000)) },\n  },\n\n  mounted () {\n    if (this.targetEl) {\n      this.mountToTarget()\n    }\n    if (!this.disabled) {\n      this.sendUpdate()\n    }\n    // Destroy doesn't fire on a page unload.\n    window.addEventListener('unload', this.$destroy)\n  },\n\n  updated () {\n    if (this.disabled) {\n      this.clear()\n    } else {\n      this.sendUpdate()\n    }\n  },\n\n  beforeDestroy () {\n    this.clear()\n    if (this.mountedComp) {\n      this.mountedComp.$destroy()\n    }\n  },\n\n  watch: {\n    to (newValue, oldValue) {\n      oldValue && this.clear(oldValue)\n      this.sendUpdate()\n    },\n    targetEl (newValue, oldValue) {\n      this.mountToTarget()\n    },\n  },\n\n  methods: {\n\n    sendUpdate () {\n      if (this.to) {\n        if (this.$slots.default) {\n          wormhole.open({\n            from: this.name,\n            to: this.to,\n            passengers: [...this.$slots.default],\n            order: this.order,\n          })\n        } else {\n          this.clear()\n        }\n      } else if (!this.to && !this.targetEl) {\n        console.warn('[vue-portal]: You have to define a target via the `to` prop.')\n      }\n    },\n\n    clear (target) {\n      wormhole.close({\n        from: this.name,\n        to: target || this.to,\n      })\n    },\n\n    mountToTarget () {\n      let el\n      const target = this.targetEl\n\n      if (typeof target === 'string') {\n        el = document.querySelector(this.targetEl)\n      } else if (target instanceof HTMLElement || (hasParentFrame && target instanceof parent.HTMLElement)) {\n        el = target\n      } else {\n        console.warn('[vue-portal]: value of targetEl must be of type String or HTMLElement')\n        return\n      }\n\n      const attributes = extractAttributes(el)\n\n      if (el) {\n        const target = new Vue({\n          ...Target,\n          parent: this,\n          propsData: {\n            name: this.to,\n            tag: el.tagName,\n            attributes,\n          },\n        })\n        target.$mount(el)\n        this.mountedComp = target\n      } else {\n        console.warn('[vue-portal]: The specified targetEl ' + this.targetEl + ' was not found')\n      }\n    },\n  },\n\n  render (h) {\n    const children = this.$slots.default || []\n    const Tag = this.tag\n    if (children.length && this.disabled) {\n      return children.length <= 1 && this.slim\n        ? children[0]\n        : (<Tag>{children}</Tag>)\n    } else {\n      return (<Tag class={'v-portal'} style={'display: none'} key={'v-portal-placeholder'}/>)\n      // h(this.tag, { class: { 'v-portal': true }, style: { display: 'none' }, key: 'v-portal-placeholder' })\n    }\n  },\n}\n","import Portal from './components/portal.js'\nimport PortalTarget from './components/portal-target.js'\nimport Wormhole from './components/wormhole.js'\n\nfunction install (Vue, opts = {}) {\n  Vue.component(opts.portalName || 'portal', Portal)\n  Vue.component(opts.portalTargetName || 'portal-target', PortalTarget)\n}\nif (typeof window !== 'undefined' && window.Vue) {\n  window.Vue.use({ install: install })\n}\n\nexport default {\n  install,\n  Portal,\n  PortalTarget,\n  Wormhole,\n}\n"],"names":["extractAttributes","el","map","hasAttributes","attributes","attrs","i","length","attr","value","name","freeze","item","Array","isArray","Object","combinePassengers","transports","passengers","transport","concat","Wormhole","to","from","keys","indexOf","set","currentIndex","getTransportIndex","newTransports","slice","push","sort","a","b","order","force","index","splice","hasOwnProperty","getContentFor","undefined","wormhole","type","Boolean","default","String","required","$set","unwatch","$watch","emitChange","updateAttributes","$nextTick","transition","firstRender","$el","innerHTML","class","trim","split","forEach","klass","classList","add","setAttribute","oldTransports","multiple","$emit","newTransport","oldTransport","ownTransports","$slots","noWrapper","slim","children","warn","t","data","babelHelpers.typeof","appear","props","renderSlim","tag","on","transitionEvents","h","TransitionType","Tag","withTransition","transitionData","wrapperKey","inBrowser","window","hasParentFrame","parent","pid","Number","HTMLElement","Math","round","random","targetEl","mountToTarget","disabled","sendUpdate","addEventListener","$destroy","clear","mountedComp","newValue","oldValue","open","target","close","document","querySelector","Vue","Target","tagName","$mount","install","opts","component","portalName","Portal","portalTargetName","PortalTarget","use"],"mappings":"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"}